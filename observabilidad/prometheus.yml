global:
  scrape_interval: 5s

scrape_configs:

  # ------------ MICROSERVICIOS METAMAPA -----------------

  - job_name: "agregador"
    metrics_path: "/agregador/actuator/prometheus"
    static_configs:
      - targets: ["host.docker.internal:8084"]
        labels:
          service_name: "agregador"

  - job_name: "api-publica"
    metrics_path: "/apiPublica/actuator/prometheus"
    static_configs:
      - targets: ["host.docker.internal:8085"]
        labels:
          service_name: "apiPublica"

  - job_name: "api-administrativa"
    metrics_path: "/apiAdministrativa/actuator/prometheus"
    static_configs:
      - targets: ["host.docker.internal:8086"]
        labels:
          service_name: "apiAdministrativa"

  - job_name: "estadisticas"
    metrics_path: "/estadisticas/actuator/prometheus"
    static_configs:
      - targets: ["host.docker.internal:8087"]
        labels:
          service_name: "estadisticas"

  - job_name: "fuente-estatica"
    metrics_path: "/fuentesEstaticas/actuator/prometheus"
    static_configs:
      - targets: ["host.docker.internal:8081"]
        labels:
          service_name: "fuenteEstatica"

  - job_name: "fuente-dinamica"
    metrics_path: "/fuentesDinamicas/actuator/prometheus"
    static_configs:
      - targets: ["host.docker.internal:8082"]
        labels:
          service_name: "fuenteDinamica"

  - job_name: "fuente-proxy"
    metrics_path: "/fuentesProxy/actuator/prometheus"
    static_configs:
      - targets: ["host.docker.internal:8083"]
        labels:
          service_name: "fuenteProxy"

  - job_name: "interfaz-agregador"
    metrics_path: "/actuator/prometheus"
    static_configs:
      - targets: ["host.docker.internal:8094"]
        labels:
          service_name: "interfazAgregador"

  - job_name: "eureka-server"
    metrics_path: "/actuator/prometheus"
    static_configs:
      - targets: ["host.docker.internal:8761"]
        labels:
          service_name: "EurekaServer"

  # ------------ OBSERVABILIDAD LOCAL (misma EC2) -----------------

  - job_name: "zipkin"
    static_configs:
      - targets: ["zipkin:9411"]

  - job_name: "loki"
    static_configs:
      - targets: ["loki:3100"]

  # ------------ NODE EXPORTER (si lo agreg√°s) -----------------
  # - job_name: 'node'
  #   static_configs:
  #     - targets: ['node-exporter:9100']
