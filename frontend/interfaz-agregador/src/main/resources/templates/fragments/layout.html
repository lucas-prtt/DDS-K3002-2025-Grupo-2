<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org" th:fragment="layout(contenido)">
    <head>
        <title>MetaMapa</title>
        <link rel="icon" type="image/x-icon" th:href="@{/favicon.ico}">

        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <!-- Tokens CSRF para formularios POST -->
        <meta name="_csrf" th:content="${_csrf?.token}" />
        <meta name="_csrf_header" th:content="${_csrf?.headerName}" />

        <!-- Tailwind CSS desde CDN -->
        <script src="https://cdn.tailwindcss.com"></script>
        <!-- Bootstrap CSS -->
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

        <!-- Bootstrap JS -->
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>


        <!-- Google Fonts -->
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@400;500;700&display=swap" rel="stylesheet">

        <!-- Estilos globales para eliminar espacios en blanco -->
        <style>
            /* Estilos mínimos para los modales - solo lo necesario */
            #modalCrearColeccion {
                z-index: 9999;
            }

            #modalCrearColeccion.hidden {
                display: none;
            }

            #modalCrearHecho {
                z-index: 9999;
            }

            #modalOverlay {
                z-index: 9998;
            }
        </style>

        <!-- ============================================== -->
        <!-- INCLUYE LOS ESTILOS ESPECÍFICOS DE LA PÁGINA   -->
        <!-- (Solo si el fragmento 'pageStyles' está definido) -->
        <th:block th:replace="::pageStyles" />
        <!-- ============================================== -->
        <th:block th:replace="~{fragments/hamburger-menu :: hamburgerMenuStyles}" />
        <th:block th:replace="~{fragments/button :: buttonMenuStyles}" />
    </head>

    <body class="bodyHome bg-gray-50 min-h-screen">

        <!-- Header -->
        <th:block th:replace="~{fragments/header :: navbar}" />

        <!-- Contenido Principal (variable) -->
        <th:block th:replace="${contenido}" />

        <!-- Footer -->
        <th:block th:replace="~{fragments/footer :: footer}" />

        <!-- Modals globales -->
        <th:block th:replace="~{fragments/modals :: modalCrearHecho}" />
        <th:block th:replace="~{fragments/modals :: modalCrearColeccion}" />

        <!-- Scripts -->
        <th:block th:replace="~{fragments/hamburger-menu :: hamburgerMenuScripts}" />
        <th:block th:replace="~{fragments/search-bar :: searchBarScripts}" />

        <!-- Agregar antes del cierre del body -->
        <script th:inline="javascript">
            /*<![CDATA[*/
            window.autorData = {
                id: [[${userId}]],
                email: [[${email}]],
                nombre: [[${firstName}]],
                apellido: [[${lastName}]]
            };
            console.log('Datos del autor:', window.autorData);
            /*]]>*/
        </script>
    </body>
</html>
